{
  "hash": "f2a3266cf7babc57cd89514848480c1c",
  "result": {
    "engine": "knitr",
    "markdown": "# Wright Map & Person-Item Map\n\n## Apa Itu Wright Map?\n\n**Wright Map** (atau *Person-Item Map*) adalah visualisasi khas Rasch Model yang menampilkan **distribusi kemampuan peserta (θ) dan kesulitan item (b) pada skala yang sama**.\n\nOutput ini langsung menunjukkan:\n\n- Apakah instrumen cocok dengan kemampuan peserta (*targeting*)\n- Item mana yang terlalu mudah atau terlalu sulit\n- Rentang kemampuan yang tidak tercakup instrumen\n\n## Setup Data dan Estimasi\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(mirt)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\nn_peserta <- 300\nn_item    <- 25\nb_true    <- seq(-2.5, 2.5, length.out = n_item)\ntheta_true <- rnorm(n_peserta, 0, 1)\n\n# Generate data Rasch\nprob_m <- outer(theta_true, b_true,\n                function(t, b) 1 / (1 + exp(-(t - b))))\ndata_wm <- matrix(\n  rbinom(n_peserta * n_item, 1, prob_m),\n  nrow = n_peserta,\n  dimnames = list(NULL, paste0(\"I\", sprintf(\"%02d\", 1:n_item)))\n)\n\n# Estimasi Rasch dengan mirt\nmodel_wm  <- mirt(data_wm, 1, itemtype = \"Rasch\", verbose = FALSE)\n\n# Kemampuan peserta (EAP)\ntheta_est <- fscores(model_wm, method = \"EAP\")[, 1]\n\n# Kesulitan item (b = -d karena mirt pakai intercept)\nparams_wm <- coef(model_wm, IRTpars = TRUE, simplify = TRUE)$items\nb_est     <- params_wm[, \"b\"]\n\ncat(\"=== DATA SIAP ===\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n=== DATA SIAP ===\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Peserta  :\", length(theta_est), \"| Mean θ =\", round(mean(theta_est), 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPeserta  : 300 | Mean θ = 0 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Item     :\", length(b_est),     \"| Mean b =\", round(mean(b_est), 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nItem     : 25 | Mean b = 0.06 \n```\n\n\n:::\n:::\n\n\n## Wright Map dengan ggplot2\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ── Fungsi Wright Map ggplot2 ──────────────────────────────────────────\nwright_map <- function(theta, b, item_labels = NULL,\n                        titl = \"Wright Map\",\n                        warna_theta = \"#3498db\",\n                        warna_b     = \"#e74c3c\") {\n\n  if (is.null(item_labels))\n    item_labels <- paste0(\"I\", sprintf(\"%02d\", seq_along(b)))\n\n  # Batas sumbu y bersama\n  y_min <- floor(min(c(theta, b))) - 0.5\n  y_max <- ceiling(max(c(theta, b))) + 0.5\n\n  # Panel kiri: histogram peserta\n  df_theta <- data.frame(theta = theta)\n\n  p_kiri <- ggplot(df_theta, aes(x = theta)) +\n    geom_histogram(aes(y = after_stat(count)),\n                   binwidth = 0.25, fill = warna_theta,\n                   color = \"white\", alpha = 0.85) +\n    scale_x_continuous(limits = c(y_min, y_max)) +\n    coord_flip() +\n    labs(x = \"Kemampuan Peserta (\\u03b8)\", y = \"Frekuensi\",\n         title = \"Peserta\") +\n    theme_minimal(base_size = 11) +\n    theme(axis.title.y = element_text(size = 9),\n          plot.title = element_text(hjust = 0.5, face = \"bold\",\n                                     color = warna_theta))\n\n  # Panel kanan: titik item\n  df_b <- data.frame(b = b, label = item_labels,\n                      x = rep(0.5, length(b)))\n\n  p_kanan <- ggplot(df_b, aes(y = b, x = x)) +\n    geom_point(size = 3, color = warna_b) +\n    geom_text(aes(label = label, x = 0.55),\n              hjust = 0, size = 3, color = \"gray20\") +\n    geom_hline(yintercept = 0, linetype = \"dashed\",\n               color = \"gray60\", linewidth = 0.7) +\n    scale_y_continuous(limits = c(y_min, y_max)) +\n    scale_x_continuous(limits = c(0, 1.5)) +\n    labs(y = \"Kesulitan Item (b)\", x = NULL, title = \"Item\") +\n    theme_minimal(base_size = 11) +\n    theme(axis.text.x  = element_blank(),\n          axis.ticks.x = element_blank(),\n          plot.title = element_text(hjust = 0.5, face = \"bold\",\n                                     color = warna_b))\n\n  # Gabungkan dua panel\n  library(patchwork)\n  (p_kiri | p_kanan) +\n    plot_annotation(\n      title   = titl,\n      caption = \"Kiri: distribusi kemampuan peserta | Kanan: lokasi item pada skala yang sama\",\n      theme   = theme(\n        plot.title   = element_text(size = 14, face = \"bold\",\n                                     hjust = 0.5, color = \"#2c3e50\"),\n        plot.caption = element_text(size = 9, color = \"gray50\")\n      )\n    ) +\n    plot_layout(widths = c(1, 1.4))\n}\n\n# Tampilkan Wright Map dasar\nwright_map(\n  theta       = theta_est,\n  b           = b_est,\n  item_labels = paste0(\"I\", sprintf(\"%02d\", 1:n_item)),\n  titl        = \"Wright Map — Asesmen Kompetensi (Rasch)\"\n)\n```\n\n::: {.cell-output-display}\n![Wright Map — Rasch Model](bab13-wright-map_files/figure-html/fig-wright-map-basic-1.png){#fig-wright-map-basic width=672}\n:::\n:::\n\n\n## Interpretasi Wright Map\n\n::: {.callout-note title=\"Panduan Membaca Wright Map\"}\n| Area di Wright Map | Maknanya |\n|-------------------|---------|\n| **Peserta di atas item tertinggi** | Tes terlalu mudah — perlu item lebih sulit |\n| **Item di atas peserta tertinggi** | Item terlalu sulit untuk kelompok ini |\n| **Kluster peserta vs kluster item** | Kesenjangan pengukuran — SEM besar di area itu |\n| **Keselarasan sebaran** | Instrumen sesuai dengan kemampuan peserta |\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Versi dengan zona targeting diwarnai\ny_min2 <- floor(min(c(theta_est, b_est))) - 0.3\ny_max2 <- ceiling(max(c(theta_est, b_est))) + 0.3\n\n# Histogram peserta\np_left2 <- ggplot(data.frame(theta = theta_est), aes(x = theta)) +\n  annotate(\"rect\", xmin = quantile(b_est, 0.25),\n           xmax = quantile(b_est, 0.75),\n           ymin = -Inf, ymax = Inf,\n           fill = \"#27ae60\", alpha = 0.08) +\n  geom_histogram(binwidth = 0.25, fill = \"#3498db\",\n                 color = \"white\", alpha = 0.85) +\n  geom_vline(xintercept = mean(theta_est),\n             linetype = \"dashed\", color = \"#1a5276\", linewidth = 1) +\n  scale_x_continuous(limits = c(y_min2, y_max2)) +\n  coord_flip() +\n  annotate(\"text\", x = mean(theta_est) + 0.15, y = 35,\n           label = paste(\"Mean =\", round(mean(theta_est), 2)),\n           color = \"#1a5276\", size = 3.2, hjust = 0) +\n  labs(x = \"\\u03b8\", y = \"Frekuensi\", title = \"Peserta\") +\n  theme_minimal(base_size = 11) +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\",\n                                   color = \"#3498db\"))\n\n# Titik item dengan warna zona\ndf_b2 <- data.frame(\n  b     = b_est,\n  label = paste0(\"I\", sprintf(\"%02d\", 1:n_item)),\n  Zona  = cut(b_est,\n              breaks = c(-Inf, -1.5, -0.5, 0.5, 1.5, Inf),\n              labels = c(\"Sangat Mudah\",\"Mudah\",\"Sedang\",\"Sulit\",\"Sangat Sulit\"))\n)\n\np_right2 <- ggplot(df_b2, aes(y = b, x = 0.5, color = Zona)) +\n  geom_hline(yintercept = mean(b_est),\n             linetype = \"dashed\", color = \"#c0392b\", linewidth = 1) +\n  geom_point(size = 3.5) +\n  geom_text(aes(label = label, x = 0.56),\n            hjust = 0, size = 2.8, color = \"gray25\") +\n  scale_color_manual(values = c(\n    \"Sangat Mudah\" = \"#27ae60\",\n    \"Mudah\"        = \"#2ecc71\",\n    \"Sedang\"       = \"#f39c12\",\n    \"Sulit\"        = \"#e67e22\",\n    \"Sangat Sulit\" = \"#e74c3c\"\n  )) +\n  scale_y_continuous(limits = c(y_min2, y_max2)) +\n  scale_x_continuous(limits = c(0, 1.5)) +\n  annotate(\"text\", y = mean(b_est) + 0.1, x = 1.3,\n           label = paste(\"Mean b =\", round(mean(b_est), 2)),\n           color = \"#c0392b\", size = 3.2) +\n  labs(y = \"b (logit)\", x = NULL, title = \"Item\",\n       color = \"Kategori Kesulitan\") +\n  theme_minimal(base_size = 11) +\n  theme(axis.text.x  = element_blank(),\n        axis.ticks.x = element_blank(),\n        legend.position = \"bottom\",\n        legend.text = element_text(size = 8),\n        plot.title = element_text(hjust = 0.5, face = \"bold\",\n                                   color = \"#e74c3c\"))\n\nlibrary(patchwork)\n(p_left2 | p_right2) +\n  plot_annotation(\n    title = \"Wright Map dengan Zona Kesulitan Item\",\n    theme = theme(plot.title = element_text(size = 13, face = \"bold\",\n                                             hjust = 0.5))\n  ) +\n  plot_layout(widths = c(1, 1.5), guides = \"collect\") &\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![Wright Map dengan Anotasi Zona Targeting](bab13-wright-map_files/figure-html/fig-wright-interpretasi-1.png){#fig-wright-interpretasi width=672}\n:::\n:::\n\n\n## Analisis Targeting\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_theta <- mean(theta_est)\nmean_b     <- mean(b_est)\nsd_theta   <- sd(theta_est)\nsd_b       <- sd(b_est)\ngap        <- mean_theta - mean_b\n\ncat(\"=== ANALISIS TARGETING ===\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n=== ANALISIS TARGETING ===\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(sprintf(\"Mean theta peserta : %.3f  (SD = %.3f)\\n\", mean_theta, sd_theta))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMean theta peserta : -0.000  (SD = 0.870)\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(sprintf(\"Mean b item        : %.3f  (SD = %.3f)\\n\", mean_b, sd_b))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMean b item        : 0.060  (SD = 1.594)\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(sprintf(\"Selisih (gap)      : %.3f logit\\n\", gap))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSelisih (gap)      : -0.060 logit\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(sprintf(\"Kualitas targeting : %s\\n\",\n    ifelse(abs(gap) < 0.3, \"Sangat Baik\",\n    ifelse(abs(gap) < 0.5, \"Baik\",\n    ifelse(mean_theta > mean_b, \"Instrumen terlalu mudah\",\n           \"Instrumen terlalu sulit\")))))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nKualitas targeting : Sangat Baik\n```\n\n\n:::\n\n```{.r .cell-code}\n# Visualisasi distribusi tumpang-tindih\ndf_both <- data.frame(\n  nilai = c(theta_est, b_est),\n  jenis = c(rep(\"Kemampuan Peserta (\\u03b8)\", n_peserta),\n             rep(\"Kesulitan Item (b)\",    n_item))\n)\n\nggplot(df_both, aes(x = nilai, fill = jenis)) +\n  geom_density(alpha = 0.5, linewidth = 0.9) +\n  geom_vline(xintercept = mean_theta, color = \"#3498db\",\n             linetype = \"dashed\", linewidth = 1.2) +\n  geom_vline(xintercept = mean_b, color = \"#e74c3c\",\n             linetype = \"dashed\", linewidth = 1.2) +\n  annotate(\"label\", x = mean_theta, y = 0.55,\n           label = paste(\"Mean\\u03b8 =\", round(mean_theta, 2)),\n           fill = \"#eaf4fb\", color = \"#1a5276\", size = 3.5) +\n  annotate(\"label\", x = mean_b - 0.05, y = 0.45,\n           label = paste(\"Mean b =\", round(mean_b, 2)),\n           fill = \"#fef9e7\", color = \"#c0392b\", size = 3.5) +\n  scale_fill_manual(values = c(\"#3498db\", \"#e74c3c\")) +\n  labs(\n    title    = \"Distribusi Kemampuan Peserta vs Kesulitan Item\",\n    subtitle = \"Tumpang-tindih tinggi = targeting baik | Gap kecil = instrumen seimbang\",\n    x = \"Skala Logit\", y = \"Densitas\", fill = \"\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![Analisis Targeting: Distribusi θ vs b](bab13-wright-map_files/figure-html/fig-targeting-1.png){#fig-targeting width=672}\n:::\n:::\n\n\n## Wright Map untuk Skala Politomus (PCM)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Simulasi data Likert 4 kategori (0-3) menggunakan mirt\nset.seed(99)\nn_item_pcm  <- 8\nn_peserta_p <- 250\n\n# Generate data politomus Rasch (PCM)\ndelta_all <- lapply(1:n_item_pcm, function(i)\n  sort(rnorm(3, mean = (i - 4.5) * 0.5, sd = 0.4)))\n\ntheta_p <- rnorm(n_peserta_p, 0, 1)\n\n# Fungsi generate respon PCM\ngen_pcm <- function(theta, deltas) {\n  m <- length(deltas)\n  num <- c(0, cumsum(theta - deltas))\n  probs <- exp(num) / sum(exp(num))\n  sample(0:m, 1, prob = probs)\n}\n\ndata_pcm <- matrix(\n  sapply(1:n_peserta_p, function(j)\n    sapply(1:n_item_pcm, function(i)\n      gen_pcm(theta_p[j], delta_all[[i]]))),\n  nrow = n_peserta_p, byrow = TRUE,\n  dimnames = list(NULL, paste0(\"Kompetensi\", 1:n_item_pcm))\n)\n\n# Estimasi PCM dengan mirt\nmodel_pcm <- mirt(data_pcm, 1, itemtype = \"gpcm\", verbose = FALSE)\n\n# Theta peserta\ntheta_pcm <- fscores(model_pcm, method = \"EAP\")[, 1]\n\n# Ekstrak threshold (delta) per item\ncoef_pcm <- coef(model_pcm, IRTpars = TRUE, simplify = FALSE)\nthresh_list <- lapply(seq_len(n_item_pcm), function(i) {\n  co <- coef_pcm[[i]]\n  # kolom cb1, cb2, cb3 = threshold\n  th_cols <- grep(\"^cb|^b\", colnames(co), value = TRUE)\n  if (length(th_cols) == 0) return(rep(NA, 3))\n  as.numeric(co[1, th_cols[1:min(3, length(th_cols))]])\n})\n\n# Wright Map PCM dengan ggplot2\ndf_thresh <- do.call(rbind, lapply(seq_len(n_item_pcm), function(i) {\n  data.frame(\n    item      = paste0(\"Komp\", i),\n    threshold = thresh_list[[i]],\n    kategori  = paste0(\"Kat\", 1:3),\n    x         = 0.5\n  )\n}))\ndf_thresh <- df_thresh[!is.na(df_thresh$threshold), ]\n\ny_pcm_min <- floor(min(c(theta_pcm, df_thresh$threshold), na.rm=TRUE)) - 0.3\ny_pcm_max <- ceiling(max(c(theta_pcm, df_thresh$threshold), na.rm=TRUE)) + 0.3\n\n# Panel kiri: histogram peserta\np_pcm_kiri <- ggplot(data.frame(theta = theta_pcm), aes(x = theta)) +\n  geom_histogram(binwidth = 0.25, fill = \"#3498db\",\n                 color = \"white\", alpha = 0.85) +\n  scale_x_continuous(limits = c(y_pcm_min, y_pcm_max)) +\n  coord_flip() +\n  labs(x = \"Kemampuan Pegawai (\\u03b8)\", y = \"Frekuensi\",\n       title = \"Peserta\") +\n  theme_minimal(base_size = 11) +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\",\n                                   color = \"#3498db\"))\n\n# Panel kanan: threshold per item\npal_kat <- c(\"Kat1\" = \"#2ecc71\", \"Kat2\" = \"#f39c12\", \"Kat3\" = \"#e74c3c\")\n\np_pcm_kanan <- ggplot(df_thresh,\n                       aes(y = threshold, x = x, color = kategori)) +\n  geom_point(size = 3.5, alpha = 0.85) +\n  geom_text(aes(label = item, x = 0.56),\n            hjust = 0, size = 2.8, color = \"gray25\") +\n  geom_hline(yintercept = 0, linetype = \"dashed\",\n             color = \"gray60\", linewidth = 0.7) +\n  scale_color_manual(values = pal_kat,\n                     labels = c(\"Kat1\" = \"Threshold 1\\u21922\",\n                                \"Kat2\" = \"Threshold 2\\u21923\",\n                                \"Kat3\" = \"Threshold 3\\u21924\")) +\n  scale_y_continuous(limits = c(y_pcm_min, y_pcm_max)) +\n  scale_x_continuous(limits = c(0, 1.5)) +\n  labs(y = \"Threshold (logit)\", x = NULL,\n       title = \"Item (PCM)\", color = \"Transisi Kategori\") +\n  theme_minimal(base_size = 11) +\n  theme(axis.text.x  = element_blank(),\n        axis.ticks.x = element_blank(),\n        legend.position = \"bottom\",\n        legend.text = element_text(size = 8),\n        plot.title = element_text(hjust = 0.5, face = \"bold\",\n                                   color = \"#e74c3c\"))\n\n(p_pcm_kiri | p_pcm_kanan) +\n  plot_annotation(\n    title   = \"Wright Map \\u2014 PCM (Skala Kompetensi Likert 4 Kategori)\",\n    caption = \"Setiap item memiliki 3 threshold (transisi antar kategori 0\\u21921, 1\\u21922, 2\\u21923)\",\n    theme   = theme(\n      plot.title   = element_text(size = 13, face = \"bold\", hjust = 0.5),\n      plot.caption = element_text(size = 9, color = \"gray50\")\n    )\n  ) +\n  plot_layout(widths = c(1, 1.5), guides = \"collect\") &\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![Wright Map — Partial Credit Model (Skala Likert 4 Kategori)](bab13-wright-map_files/figure-html/fig-wright-pcm-1.png){#fig-wright-pcm width=768}\n:::\n:::\n\n\n## Latihan Mandiri {.unnumbered}\n\n1. Modifikasi fungsi `wright_map()` untuk menambahkan **garis referensi** pada nilai θ = −1, 0, dan +1 di panel peserta. Apa makna setiap garis referensi tersebut?\n\n2. Dari Wright Map analisis targeting, hitung **proporsi peserta** yang berada dalam rentang item (antara item termudah dan tersulit). Item termudah dan tersulit dapat diperoleh dari `range(b_est)`.\n\n3. Buat Wright Map untuk subkelompok peserta berbeda (misalnya kelompok dengan θ > 0 dan θ ≤ 0). Bagaimana perbedaan profil targeting antar kelompok?\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}